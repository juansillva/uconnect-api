generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Professor {
  id     Int              @id @default(autoincrement())
  nome   String
  email  String           @unique
  senha  String
  avatar String?
  posts  Post[]
  turmas ProfessorTurma[]
}

model Turma {
  id          Int              @id @default(autoincrement())
  nome        String           @unique
  icon        String?
  posts       Post[]
  professores ProfessorTurma[]
}

model ProfessorTurma {
  professor    Professor @relation(fields: [professor_id], references: [id])
  professor_id Int
  turma        Turma     @relation(fields: [turma_id], references: [id])
  turma_id     Int

  @@id([professor_id, turma_id])
}

model Post {
  id               Int           @id @default(autoincrement())
  titulo           String
  conteudo         String // Obrigat√≥rio
  data_criacao     DateTime      @default(now())
  data_atualizacao DateTime?     @updatedAt
  professor        Professor     @relation(fields: [professor_id], references: [id])
  professor_id     Int
  turma            Turma         @relation(fields: [turma_id], references: [id])
  turma_id         Int
  arquivos         PostArquivo[]
}

model PostArquivo {
  id      Int    @id @default(autoincrement())
  nome    String
  url     String
  tipo    String
  tamanho Int?
  post    Post   @relation(fields: [post_id], references: [id], onDelete: Cascade)
  post_id Int
}
